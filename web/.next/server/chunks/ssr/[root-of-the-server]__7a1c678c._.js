module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},83791,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/HomePageClient.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/HomePageClient.tsx <module evaluation>","default")},61643,a=>{"use strict";a.s(["default",()=>b]);let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/src/components/HomePageClient.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/src/components/HomePageClient.tsx","default")},73689,a=>{"use strict";a.i(83791);var b=a.i(61643);a.n(b)},24093,a=>{"use strict";let b={grid:{totalColumns:10,cellHeight:10,gap:4},volumeFactors:{scoreWeight:3,textWeight:0},constraints:{minWidth:3,maxWidth:8,minHeight:2},shapeEfficiency:{narrowThreshold:3,narrowFactor:.9,wideThreshold:6,wideFactor:1.1,standardFactor:1},physics:{colWidthPx:116,lineHeightPx:24,charWidthPx:13,paddingPx:40,headerHeightPx:130},corrections:{lineClamp:[{minRatio:2,minRows:0,lines:8},{minRatio:1.4,minRows:3,lines:6},{minRatio:1,minRows:0,lines:5},{minRatio:0,minRows:4,lines:5},{minRatio:0,minRows:0,lines:3}]}};class c{gridCols;gridRows;grid;placements;nextRow;constructor(a=10,b=100){this.gridCols=a,this.gridRows=b,this.grid=this.createEmptyGrid(a,b),this.placements=[],this.nextRow=0}createEmptyGrid(a,b){return Array.from({length:b},()=>Array.from({length:a},()=>({occupied:!1})))}expandGridIfNeeded(a){for(;this.gridRows<a;)this.grid.push(Array.from({length:this.gridCols},()=>({occupied:!1}))),this.gridRows++}findPosition(a,b,c=0){for(let d=c;d<this.gridRows;d++){for(let c=0;c<=this.gridCols-a;c++)if(this.canPlace(c,d,a,b))return{col:c,row:d};d>=this.gridRows-b-1&&this.expandGridIfNeeded(this.gridRows+10)}let d=Math.max(this.gridRows,c);return this.expandGridIfNeeded(d+b),{col:0,row:d}}canPlace(a,b,c,d){this.expandGridIfNeeded(b+d);for(let e=b;e<b+d;e++)for(let b=a;b<a+c;b++)if(b>=this.gridCols||this.grid[e][b].occupied)return!1;return!0}markOccupied(a,b,c,d,e){this.expandGridIfNeeded(b+d);for(let f=b;f<b+d;f++)for(let b=a;b<a+c;b++)this.grid[f][b]={occupied:!0,articleId:e};this.nextRow=Math.max(this.nextRow,b+d)}placeArticle(a,b=0){let c=this.findPosition(a.cols,a.rows,b);if(!c)return null;this.markOccupied(c.col,c.row,a.cols,a.rows,a.id);let d={article:a,...c};return this.placements.push(d),d}detectGaps(a=6){let b=[],c=new Set;for(let d=0;d<this.nextRow;d++)for(let e=0;e<this.gridCols;e++){let f=`${e},${d}`;if(c.has(f)||this.grid[d][e].occupied)continue;let g=this.findLargestGap(e,d,c);g&&g.area>=a&&b.push(g)}return b.sort((a,b)=>b.area-a.area)}findLargestGap(a,b,c){let d=0;for(let c=a;c<this.gridCols&&!this.grid[b][c].occupied;c++)d++;let e=0,f=d;for(let c=b;c<this.nextRow;c++){let b=0;for(let d=a;d<a+f&&!this.grid[c][d].occupied;d++)b++;if(0===b)break;f=Math.min(f,b),e++}for(let d=b;d<b+e;d++)for(let b=a;b<a+f;b++)c.add(`${b},${d}`);return{col:a,row:b,width:f,height:e,area:f*e}}findFillerForGap(a,b){let c=b.filter(b=>b.cols<=a.width&&b.rows<=a.height);return 0===c.length?null:(c.sort((b,c)=>{let d=b.zeroEchoScore-c.zeroEchoScore;if(Math.abs(d)>.5)return d;let e=b.cols*b.rows/a.area;return c.cols*c.rows/a.area-e}),c[0]||null)}optimizeLayout(a){this.gridRows=100,this.grid=this.createEmptyGrid(this.gridCols,this.gridRows),this.placements=[],this.nextRow=0;let c=a.map((a,c)=>({...a,id:a.id||a.url||`article-${c}`,...(a=>{let{constraints:c,physics:d,grid:e}=b,f=(a.summary||"").length,g=a.impact_score||0,h=c.minWidth,i=c.maxWidth,j=h+(a=>{if(!a)return 0;let b=0;for(let c=0;c<a.length;c++)b=(b<<5)-b+a.charCodeAt(c),b&=b;return Math.abs(b)})(a.id||"")%(i-h+1);g>=7&&(j=Math.max(j,6));let k=Math.ceil(f/(((j=Math.min(j,i))*d.colWidthPx-d.paddingPx-(j-1)*e.gap)/d.charWidthPx)),l=Math.ceil((d.headerHeightPx+k*d.lineHeightPx+d.paddingPx+16)/(e.cellHeight+16));return l+=2,{cols:j,rows:l=Math.min(l=Math.max(l,5),80)}})(a),zeroEchoScore:a.zero_echo_score||0,impactScore:a.impact_score||0})),d=[...c].sort((a,b)=>{let c=10-a.zeroEchoScore+a.impactScore;return 10-b.zeroEchoScore+b.impactScore-c}),e=new Set,f=[],g=[...c].sort((a,b)=>{let c=10-a.zeroEchoScore+a.impactScore;return 10-b.zeroEchoScore+b.impactScore-c}),h=[...c].sort((a,b)=>{let c=a.zeroEchoScore-b.zeroEchoScore;return .01>Math.abs(c)?b.impactScore-a.impactScore:c}),i=[...c].sort((a,b)=>b.impactScore-a.impactScore),j=new Map,k=(a,b)=>{j.has(a)||j.set(a,[]),j.get(a).push(b)};g.length>0&&k(g[0].id,"Today's Headline"),h.length>0&&k(h[0].id,"Zero Echo Award"),i.length>0&&k(i[0].id,"Hot Topic");let l=[],m=new Set,n=g.length>0?g[0].id:null,o=h.length>0?h[0].id:null,p=i.length>0?i[0].id:null;n&&!m.has(n)&&(l.push(n),m.add(n)),o&&!m.has(o)&&(l.push(o),m.add(o)),p&&!m.has(p)&&(l.push(p),m.add(p));let q=n?c.find(a=>a.id===n):null,r=o?c.find(a=>a.id===o):null,s=p?c.find(a=>a.id===p):null;console.log(`[Awards] Today's Headline: ${q?.id?.substring(0,30)}`),console.log(`[Awards] Zero Echo Award: ${r?.id?.substring(0,30)}`),console.log(`[Awards] Hot Topic: ${s?.id?.substring(0,30)}`);let t=0;for(let a=0;a<l.length;a++){let b=c.find(b=>b.id===l[a]);if(!b)continue;b.awards=j.get(b.id)||[],0===a&&(b.cols=10);let d=this.placeArticle(b,t);d&&(e.add(b.id),f.push(b),t=0===a?d.row+d.article.rows:d.row)}console.log(`[Phase 0] After Top 3: finalOrder=${f.length}, placed=${e.size}`),d.length;for(let a=0;a<d.length;a++){let b=d[a];!e.has(b.id)&&this.placeArticle(b)&&(e.add(b.id),f.push(b))}let u=d.filter(a=>!e.has(a.id));for(let a=0;a<3;a++)for(let a of this.detectGaps(6)){let b=u.filter(a=>!e.has(a.id)),c=this.findFillerForGap(a,b);c&&this.canPlace(a.col,a.row,c.cols,c.rows)&&(this.markOccupied(a.col,a.row,c.cols,c.rows,c.id),e.add(c.id),f.push(c))}for(let a of u)e.has(a.id)||(this.placeArticle(a),e.add(a.id),f.push(a));return console.log(`[LayoutOptimizer] Input: ${a.length}, Output: ${f.length}`),f}getGridStats(){let a=0,b=this.nextRow*this.gridCols;for(let b=0;b<this.nextRow;b++)for(let c=0;c<this.gridCols;c++)this.grid[b][c].occupied&&a++;return{occupiedCells:a,totalCells:b,fillRate:b>0?a/b:0}}}a.s(["optimizeArticleOrder",0,a=>new c(10).optimizeLayout(a)],24093)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__7a1c678c._.js.map