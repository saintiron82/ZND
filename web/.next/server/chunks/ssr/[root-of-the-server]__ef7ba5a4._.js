module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},50645,a=>{a.n(a.i(27572))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},60168,a=>{"use strict";var b=a.i(7997),c=a.i(73689),d=a.i(24093),e=a.i(19776);let f=null;async function g(){try{let a=f?.lastUpdatedAt,b=await (0,e.checkLatestUpdate)();if(!b)return{changed:!1,latestUpdatedAt:a||null};let c=a!==b;return c?console.log(`[ServerCache] Detect Change: ${a} -> ${b}`):console.log(`[ServerCache] No Change (Latest: ${b})`),{changed:c,latestUpdatedAt:b}}catch(a){return console.error("[ServerCache] Check error:",a),{changed:!0,latestUpdatedAt:null}}}async function h(){console.log("[ServerCache] Fetching fresh data from Firestore (Direct)...");try{let{issues:a,latestUpdatedAt:b}=await (0,e.fetchPublishedIssues)();if(0===a.length)return console.warn("[ServerCache] No issues found."),{issues:[],articles:[],latestUpdatedAt:null};let c=a.map(async a=>{try{let b=await (0,e.fetchArticlesByIssueId)(a.id);return(0,d.optimizeArticleOrder)(b).map(b=>({...b,publish_id:a.id,edition_name:a.edition_name,edition_code:a.edition_code}))}catch(b){return console.error(`[ServerCache] Failed to fetch articles for issue ${a.id}`,b),[]}}),f=(await Promise.all(c)).flat();return console.log(`[ServerCache] Fetched ${a.length} issues, ${f.length} articles`),{issues:a,articles:f,latestUpdatedAt:b}}catch(a){return console.error("[ServerCache] Fetch error:",a),{issues:[],articles:[],latestUpdatedAt:null}}}async function i(){if(!f){let a=await h();return f={issues:a.issues,articles:a.articles,lastUpdatedAt:a.latestUpdatedAt},{issues:a.issues,articles:a.articles}}let{changed:a,latestUpdatedAt:b}=await g();if(!a)return{issues:f.issues,articles:f.articles};console.log("[ServerCache] Data changed, refreshing...");let c=await h();return f={issues:c.issues,articles:c.articles,lastUpdatedAt:c.latestUpdatedAt||b},{issues:c.issues,articles:c.articles}}async function j(){let{issues:a,articles:d}=await i();return(0,b.jsx)(c.default,{articles:d,issues:a})}a.s(["default",()=>j,"dynamic",0,"force-dynamic","revalidate",0,0],60168)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ef7ba5a4._.js.map