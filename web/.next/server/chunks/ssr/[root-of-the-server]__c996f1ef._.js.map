{"version":3,"sources":["../../../../src/app/preview/page.tsx"],"sourcesContent":["import HomePageClient from '@/components/HomePageClient';\r\nimport { fetchPublishedIssues, fetchArticlesByIssueId, Issue, Article } from '@/lib/firestoreService';\r\nimport { optimizeArticleOrder } from '@/utils/layoutOptimizer';\r\n\r\n// No caching for preview - always fresh\r\nexport const dynamic = 'force-dynamic';\r\nexport const revalidate = 0;\r\n\r\n/**\r\n * Ïà®Í≤®ÏßÑ Preview Î™®Îìú ÌéòÏù¥ÏßÄ\r\n * Ï†ëÏÜç: /preview\r\n * released + preview ÏÉÅÌÉú Î™®Îëê ÌëúÏãú\r\n */\r\nexport default async function PreviewPage() {\r\n    console.log('üîì [Preview Mode] Loading all issues including preview...');\r\n\r\n    // preview Î™®ÎìúÎ°ú Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå (includePreview: true)\r\n    const { issues } = await fetchPublishedIssues(true);\r\n\r\n    if (issues.length === 0) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center text-white\">\r\n                <div className=\"text-center\">\r\n                    <h1 className=\"text-2xl font-bold mb-4\">No Issues Found</h1>\r\n                    <p className=\"text-muted-foreground\">No published or preview issues available.</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Í∞Å ÌöåÏ∞®Ïùò Í∏∞ÏÇ¨ Ï°∞Ìöå (Î≥ëÎ†¨)\r\n    const articlePromises = issues.map(async (issue: Issue) => {\r\n        try {\r\n            const articles = await fetchArticlesByIssueId(issue.id);\r\n            return optimizeArticleOrder(articles).map((article: Article) => ({\r\n                ...article,\r\n                publish_id: issue.id,\r\n                edition_name: issue.edition_name,\r\n                edition_code: issue.edition_code,\r\n            }));\r\n        } catch (err) {\r\n            console.error(`[Preview] Failed to fetch articles for issue ${issue.id}`, err);\r\n            return [];\r\n        }\r\n    });\r\n\r\n    const articlesArrays = await Promise.all(articlePromises);\r\n    const allArticles = articlesArrays.flat();\r\n\r\n    console.log(`üîì [Preview Mode] Loaded ${issues.length} issues, ${allArticles.length} articles`);\r\n\r\n    return (\r\n        <div>\r\n            {/* Preview Mode Indicator */}\r\n            <div style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                background: 'linear-gradient(90deg, #ffc107, #ff9800)',\r\n                color: '#333',\r\n                padding: '8px 20px',\r\n                fontSize: '14px',\r\n                fontWeight: 'bold',\r\n                textAlign: 'center',\r\n                zIndex: 9999,\r\n                boxShadow: '0 2px 8px rgba(0,0,0,0.2)'\r\n            }}>\r\n                ‚ö†Ô∏è PREVIEW MODE - Ïù¥ ÌéòÏù¥ÏßÄÎäî ÏïÑÏßÅ Í≥µÍ∞úÎêòÏßÄ ÏïäÏùÄ ÎØ∏Î¶¨Î≥¥Í∏∞ÏûÖÎãàÎã§ ({issues.length}Í∞ú ÌöåÏ∞®)\r\n            </div>\r\n            {/* Add top padding to prevent content overlap */}\r\n            <div style={{ paddingTop: '40px' }}>\r\n                <HomePageClient articles={allArticles} issues={issues} />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"4YAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAWe,eAAe,IAC1B,QAAQ,GAAG,CAAC,6DAGZ,GAAM,QAAE,CAAM,CAAE,CAAG,MAAM,CAAA,EAAA,EAAA,oBAAA,AAAoB,EAAC,IAE9C,GAAsB,GAAG,CAArB,EAAO,MAAM,CACb,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oEACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wBACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mCAA0B,oBACxC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,mDAOrD,IAAM,EAAkB,EAAO,GAAG,CAAC,MAAO,IACtC,GAAI,CACA,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,sBAAA,AAAsB,EAAC,EAAM,EAAE,EACtD,MAAO,CAAA,EAAA,EAAA,oBAAA,AAAoB,EAAC,GAAU,GAAG,CAAC,AAAC,IAAsB,CAC7D,GAAG,CAAO,CADkD,AAE5D,WAAY,EAAM,EAAE,CACpB,aAAc,EAAM,YAAY,CAChC,aAAc,EAAM,YAAY,CACpC,CAAC,CACL,CAAE,MAAO,EAAK,CAEV,OADA,QAAQ,KAAK,CAAC,CAAC,6CAA6C,EAAE,EAAM,EAAE,CAAA,CAAE,CAAE,GACnE,EAAE,AACb,CACJ,GAGM,EAAc,CADG,MAAM,QAAQ,GAAG,CAAC,EAAA,EACN,IAAI,GAIvC,OAFA,QAAQ,GAAG,CAAC,CAAC,yBAAyB,EAAE,EAAO,MAAM,CAAC,SAAS,EAAE,EAAY,MAAM,CAAC,SAAS,CAAC,EAG1F,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAEG,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,MAAO,CACR,SAAU,QACV,IAAK,EACL,KAAM,EACN,MAAO,EACP,WAAY,2CACZ,MAAO,OACP,QAAS,WACT,SAAU,OACV,WAAY,OACZ,UAAW,SACX,OAAQ,KACR,UAAW,2BACf,YAAG,gDAC+C,EAAO,MAAM,CAAC,WAGhE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,MAAO,CAAE,WAAY,MAAO,WAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAc,CAAA,CAAC,SAAU,EAAa,OAAQ,QAI/D,kCAvEuB,+BACG"}