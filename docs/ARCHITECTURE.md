# ZND í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ ë¬¸ì„œ

> ìµœì¢… ì—…ë°ì´íŠ¸: 2025-12-21

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ZND/
â”œâ”€â”€ desk/               # í¬ë¡¤ë§, MLL ë¶„ì„, íë ˆì´ì…˜, ë°œí–‰ (Python Flask)
â”œâ”€â”€ web/                # ì‚¬ìš©ì ëŒ€ìƒ ë‰´ìŠ¤ í˜ì´ì§€ (Next.js)
â”œâ”€â”€ tools/              # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ ëª¨ìŒ (BAT íŒŒì¼)
â”œâ”€â”€ docs/               # ë¬¸ì„œ
â””â”€â”€ .agent/workflows/   # AI ì—ì´ì „íŠ¸ ì›Œí¬í”Œë¡œìš°
```

---

## ğŸ–¥ï¸ DESK (êµ¬ Supplier)

**ì—­í• **: ë‰´ìŠ¤ í¬ë¡¤ë§, MLL AI ë¶„ì„, íë ˆì´ì…˜, Firestore ë°œí–‰

### ê¸°ìˆ  ìŠ¤íƒ
- **Python 3.x** + **Flask**
- **Firestore** (Firebase)
- **Gemini API** (MLL ë¶„ì„)

### í´ë” êµ¬ì¡°

```
desk/
â”œâ”€â”€ manual_crawler.py       # Flask ì•± ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”œâ”€â”€ crawler.py              # ìë™ í¬ë¡¤ëŸ¬
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core_logic.py       # í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (29KB)
â”‚   â”œâ”€â”€ db_client.py        # Firestore í´ë¼ì´ì–¸íŠ¸ (27KB)
â”‚   â”œâ”€â”€ mll_client.py       # Gemini MLL API í´ë¼ì´ì–¸íŠ¸
â”‚   â”œâ”€â”€ pipeline.py         # í¬ë¡¤ë§â†’ë¶„ì„â†’ì €ì¥ íŒŒì´í”„ë¼ì¸
â”‚   â”œâ”€â”€ score_engine.py     # ZeroEcho Score ê³„ì‚°
â”‚   â”œâ”€â”€ batch_logic.py      # ë°°ì¹˜ ì²˜ë¦¬ ë¡œì§
â”‚   â”œâ”€â”€ routes/             # Flask Blueprint ëª¨ë“ˆ
â”‚   â”‚   â”œâ”€â”€ automation.py   # ìë™í™” API (/api/automation/*)
â”‚   â”‚   â”œâ”€â”€ batch.py        # ë°°ì¹˜ API (/api/batch/*)
â”‚   â”‚   â”œâ”€â”€ cleanup.py      # ì •ë¦¬ API (/api/cleanup/*)
â”‚   â”‚   â”œâ”€â”€ crawler.py      # í¬ë¡¤ëŸ¬ API (/api/crawler/*)
â”‚   â”‚   â”œâ”€â”€ desk.py         # ë°ìŠ¤í¬ UI API (/api/desk/*)
â”‚   â”‚   â”œâ”€â”€ publications.py # ë°œí–‰ API (/api/publications/*)
â”‚   â”‚   â””â”€â”€ utility.py      # ìœ í‹¸ë¦¬í‹° API
â”‚   â””â”€â”€ crawler/            # í¬ë¡¤ëŸ¬ ëª¨ë“ˆ
â”œâ”€â”€ templates/              # HTML í…œí”Œë¦¿ (desk.html, inspector.html ë“±)
â”œâ”€â”€ static/                 # ì •ì  íŒŒì¼ (JS, CSS)
â”œâ”€â”€ cache/                  # ìºì‹œ ë°ì´í„°
â”œâ”€â”€ data/                   # ë°œí–‰ ë°ì´í„° (JSON)
â””â”€â”€ config/                 # ì„¤ì • íŒŒì¼
```

### ì£¼ìš” API ì—”ë“œí¬ì¸íŠ¸

| Blueprint | ì—”ë“œí¬ì¸íŠ¸ | ì„¤ëª… |
|:---|:---|:---|
| `desk` | `/api/desk/*` | ë°ìŠ¤í¬ UI (íë ˆì´ì…˜, í¸ì§‘) |
| `publications` | `/api/publications/*` | ë°œí–‰ ê´€ë¦¬ |
| `automation` | `/api/automation/*` | MLL ìë™ ë¶„ì„ |
| `batch` | `/api/batch/*` | ë°°ì¹˜ ì²˜ë¦¬ |
| `crawler` | `/api/crawler/*` | í¬ë¡¤ë§ ì œì–´ |
| `cleanup` | `/api/cleanup/*` | ë°ì´í„° ì •ë¦¬ |

### í¬íŠ¸
- **5500** (ë¡œì»¬ ê°œë°œ)
- **8000** (VM ë°°í¬)

---

## ğŸŒ WEB

**ì—­í• **: ì‚¬ìš©ì ëŒ€ìƒ ë‰´ìŠ¤ í˜ì´ì§€ ì œê³µ

### ê¸°ìˆ  ìŠ¤íƒ
- **Next.js 15** (App Router)
- **React 19**
- **TypeScript**
- **Tailwind CSS**
- **Firebase/Firestore** (ì§ì ‘ ì—°ê²°)

### í´ë” êµ¬ì¡°

```
web/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ page.tsx            # ë©”ì¸ í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ layout.tsx          # ë ˆì´ì•„ì›ƒ
â”‚   â”‚   â”œâ”€â”€ api/                # API Routes (í´ë¼ì´ì–¸íŠ¸ìš©)
â”‚   â”‚   â”‚   â”œâ”€â”€ publications/   # ë°œí–‰ ë°ì´í„° ì¡°íšŒ
â”‚   â”‚   â”‚   â””â”€â”€ dates/          # ë‚ ì§œ ì¡°íšŒ
â”‚   â”‚   â””â”€â”€ preview/            # í”„ë¦¬ë·° í˜ì´ì§€
â”‚   â”œâ”€â”€ components/             # React ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ HomePageClient.tsx  # ë©”ì¸ í˜ì´ì§€ í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ ArticleCard.tsx     # ê¸°ì‚¬ ì¹´ë“œ
â”‚   â”‚   â”œâ”€â”€ ArticleDisplay.tsx  # ê¸°ì‚¬ ê·¸ë¦¬ë“œ í‘œì‹œ
â”‚   â”‚   â”œâ”€â”€ PageFrame.tsx       # í˜ì´ì§€ í”„ë ˆì„
â”‚   â”‚   â”œâ”€â”€ Header.tsx          # í—¤ë”
â”‚   â”‚   â”œâ”€â”€ Footer.tsx          # í‘¸í„°
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ lib/                    # ë¼ì´ë¸ŒëŸ¬ë¦¬/ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ firebase.ts         # Firebase ì´ˆê¸°í™”
â”‚   â”‚   â”œâ”€â”€ firestoreService.ts # Firestore ì§ì ‘ ì¡°íšŒ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ serverCache.ts      # ì„œë²„ ì‚¬ì´ë“œ ìºì‹œ
â”‚   â”‚   â””â”€â”€ publicationsCache.ts # í´ë¼ì´ì–¸íŠ¸ ìºì‹œ
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ layoutOptimizer.ts  # ë ˆì´ì•„ì›ƒ ìµœì í™” ì•Œê³ ë¦¬ì¦˜
â”‚   â”œâ”€â”€ config/                 # ì„¤ì •
â”‚   â””â”€â”€ hooks/                  # React Hooks
â””â”€â”€ public/                     # ì •ì  íŒŒì¼
```

### í¬íŠ¸
- **3000** (ë¡œì»¬ ê°œë°œ)
- **8080** (VM ë°°í¬)

---

## ğŸ” í™˜ê²½ë³€ìˆ˜ ì„¤ì •

### DESK (`desk/.env`)

```env
# Gemini API (MLL ë¶„ì„ìš©)
GOOGLE_API_KEY=your_gemini_api_key

# Desk UI ì¸ì¦
DESK_USERNAME=master
DESK_PASSWORD=your_password

# ì»¤íŠ¸ë¼ì¸ ê¸°ë³¸ê°’
CUTLINE_IS_DEFAULT=6.5
CUTLINE_ZS_DEFAULT=3.0

# FirebaseëŠ” serviceAccountKey.json íŒŒì¼ ì‚¬ìš© (ë™ì¼ í´ë”)
```

### WEB (`web/.env.local`)

```env
# Firebase Client SDK (NEXT_PUBLIC_ ì ‘ë‘ì‚¬ í•„ìˆ˜)
NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
```

> âš ï¸ **ì£¼ì˜**: DESKì™€ WEBì˜ í™˜ê²½ë³€ìˆ˜ íŒŒì¼ì€ ë³„ê°œì…ë‹ˆë‹¤!
> - DESK: `desk/.env` + `desk/serviceAccountKey.json`
> - WEB: `web/.env.local`

---

## ğŸ”¥ Firestore ë°ì´í„° êµ¬ì¡°

### ì»¬ë ‰ì…˜

| ì»¬ë ‰ì…˜ | ì„¤ëª… |
|:---|:---|
| `publications` | ë°œí–‰ íšŒì°¨ ì •ë³´ |
| `articles` | ë°œí–‰ëœ ê¸°ì‚¬ ë°ì´í„° |

### `publications` ë¬¸ì„œ êµ¬ì¡°
```json
{
  "id": "auto_generated_id",
  "edition_code": "251221_1",
  "edition_name": "1í˜¸",
  "article_count": 10,
  "article_ids": ["11daca", "cf3b58", ...],
  "articles": [{"id": "...", "title": "...", "url": "..."}],
  "published_at": "2025-12-21T12:00:00Z",
  "released_at": "2025-12-21T14:00:00Z",
  "updated_at": "2025-12-21T14:30:00Z",
  "status": "preview" | "released",
  "date": "2025-12-21"
}
```

### `articles` ë¬¸ì„œ êµ¬ì¡°
```json
{
  "id": "article_xxx",
  "title_ko": "í•œêµ­ì–´ ì œëª©",
  "summary": "ìš”ì•½ ë‚´ìš©",
  "url": "https://...",
  "impact_score": 7.5,
  "zero_echo_score": 2.3,
  "publish_id": "issue_20251221_001",
  "tags": ["AI", "Tech"],
  "crawled_at": "2025-12-21T10:00:00Z"
}
```

---

## ğŸ”„ ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DESK                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Crawler  â”‚â”€â”€â–¶â”‚   MLL    â”‚â”€â”€â–¶â”‚   Desk   â”‚â”€â”€â–¶â”‚  Firestore   â”‚  â”‚
â”‚  â”‚ (ìˆ˜ì§‘)   â”‚   â”‚ (AIë¶„ì„) â”‚   â”‚ (íë ˆì´ì…˜)â”‚   â”‚   (ë°œí–‰)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                        â”‚
                                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            WEB                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  serverCache  â”‚â—€â”€â”€â”€â”‚ firestoreServiceâ”‚â—€â”€â”€â”€â”‚   Firestore   â”‚  â”‚
â”‚  â”‚  (SSR ìºì‹œ)   â”‚    â”‚   (ì§ì ‘ ì¡°íšŒ)   â”‚    â”‚   (ì½ê¸°)      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚          â”‚                                                       â”‚
â”‚          â–¼                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    React Components                        â”‚  â”‚
â”‚  â”‚  (HomePageClient â†’ ArticleDisplay â†’ ArticleCard)          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í•µì‹¬ í¬ì¸íŠ¸
- **DESK â†’ Firestore**: ë°œí–‰ (ì“°ê¸°)
- **WEB â†’ Firestore**: ì¡°íšŒ (ì½ê¸°)
- **WEBì€ DESK ì—†ì´ ë…ë¦½ ì‹¤í–‰ ê°€ëŠ¥** (Firestore ì§ì ‘ ì—°ê²°)

---

## ğŸ› ï¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (tools/)

| ìŠ¤í¬ë¦½íŠ¸ | ì„¤ëª… |
|:---|:---|
| `start_desk.bat` | Desk ì„œë²„ ì‹œì‘ (í¬íŠ¸ 5500) |
| `start_web.bat` | Web ì„œë²„ ì‹œì‘ (í¬íŠ¸ 3000) |
| `crawl.bat` | ìë™ í¬ë¡¤ëŸ¬ ì‹¤í–‰ |
| `cleanup_noise.bat` | Noise ê¸°ì‚¬ ì •ë¦¬ |
| `clear_cache.bat` | ìºì‹œ ì‚­ì œ |
| `update_data.bat` | ë°ì´í„° ë¸Œëœì¹˜ì—ì„œ ì—…ë°ì´íŠ¸ |

---

## ğŸš€ ë°°í¬ í™˜ê²½

### GCP VM êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GCP VM (e2-micro)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚     DESK        â”‚  â”‚     WEB       â”‚ â”‚
â”‚  â”‚   (Python)      â”‚  â”‚   (Next.js)   â”‚ â”‚
â”‚  â”‚   Port: 8000    â”‚  â”‚   Port: 8080  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                     â–¼                   â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚              â”‚  Firestore  â”‚            â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Cloudflare Tunnel            â”‚
â”‚  zeroechodaily.com â†’ localhost:8080     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### PM2 í”„ë¡œì„¸ìŠ¤ ê´€ë¦¬

```bash
# ecosystem.config.js ì‚¬ìš©
pm2 start ecosystem.config.js

# ê°œë³„ ì‹¤í–‰
pm2 start desk/manual_crawler.py --name "znd-backend" --interpreter python3
pm2 start npm --name "znd-web" -- start --prefix ./web -- -p 8080
```

---

## ğŸ“‹ í’ˆì§ˆ ê´€ë¦¬

### ì ìˆ˜ ì²´ê³„

| ì ìˆ˜ | ì„¤ëª… |
|:---|:---|
| **Zero Echo Score (ZES)** | ë…¸ì´ì¦ˆ ì •ë„ (ë‚®ì„ìˆ˜ë¡ ì¢‹ìŒ, 0-10) |
| **Impact Score (IS)** | ì˜í–¥ë ¥/ì¤‘ìš”ë„ (ë†’ì„ìˆ˜ë¡ ì¢‹ìŒ, 0-10) |

### í•„í„°ë§ ê·œì¹™
- **ZES â‰¥ 4.0**: Noiseë¡œ íŒì • â†’ íê¸°
- **ZES < 4.0**: ìœ íš¨ ê¸°ì‚¬ â†’ ë°œí–‰ ê°€ëŠ¥

---

## ğŸ† ì–´ì›Œë“œ ì‹œìŠ¤í…œ

| ì–´ì›Œë“œ | ê¸°ì¤€ |
|:---|:---|
| **Today's Headline** | Combined Score ìµœê³  ((10-ZES) + IS) |
| **Zero Noise Award** | ZES ìµœì € |
| **Hot Topic** | IS ìµœê³  |
